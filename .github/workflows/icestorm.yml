name: 'icestorm'

on:
  push:
  repository_dispatch:
    types: [ icestorm ]

jobs:

  icestorm:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v2
      with:
        submodules: recursive

    - name: TODO test hdlc/pkg:icestorm
      run: docker run --rm -v $(pwd):/wrk alpine /wrk/test/todo.sh
      #uses: docker://alpine
      #with:
      #  args: ./test/todo.sh

    - run: docker run --rm -v $(pwd):/wrk hdlc/icestorm /wrk/test/icestorm.sh
      #uses: docker://hdlc/icestorm
      #with:
      #  args: ./test/icestorm.sh
